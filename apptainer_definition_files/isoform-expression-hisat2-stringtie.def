Bootstrap: localimage
From: ubuntu-22.04-base.sif

%post
  cd /gscratch/srlab/programs

  # Install gffcompare
  wget http://ccb.jhu.edu/software/stringtie/dl/gffcompare-0.12.6.Linux_x86_64.tar.gz
  tar -xzvf gffcompare-0.12.6.Linux_x86_64.tar.gz
  rm gffcompare-0.12.6.Linux_x86_64.tar.gz

  # Install StringTie
  wget http://ccb.jhu.edu/software/stringtie/dl/stringtie-2.2.1.Linux_x86_64.tar.gz
  tar -xzvf stringtie-2.2.1.Linux_x86_64.tar.gz
  rm stringtie-2.2.1.Linux_x86_64.tar.gz

  # Install HISAT2
  git clone https://github.com/DaehwanKimLab/hisat2.git
  cd hisat2
  make -j

  # Install samtools
  wget https://github.com/samtools/samtools/releases/download/1.17/samtools-1.17.tar.bz2
  tar -xjvf samtools-1.17.tar.bz2
  ./configure
  make -j
  rm samtools-1.17.tar.bz2

%labels
  Author Sam White
  Version v0.0.1

%help
  This is a definition file for an isoform expression workflow utilizing HISAT2, StringTie and gffcompare.